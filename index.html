# Re-import necessary modules and regenerate the zip file after code state reset
from zipfile import ZipFile
import shutil

# Restore files
image_src = "/mnt/data/prazdnovanie.jpg"
audio_src = "/mnt/data/nostalgiya_60s.mp3"
image_dst = "/mnt/data/photo.jpg"
audio_dst = "/mnt/data/music.mp3"

shutil.copyfile(image_src, image_dst)
shutil.copyfile(audio_src, audio_dst)

# Create zip archive
zip_path = "/mnt/data/toy_shakyru_ready_site.zip"
with ZipFile(zip_path, "w") as zipf:
    zipf.write(image_dst, arcname="photo.jpg")
    zipf.write(audio_dst, arcname="music.mp3")

    html_content = '''<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <title>–¢–æ–π“ì–∞ —à–∞“õ—ã—Ä—É</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      height: 100%;
      font-family: sans-serif;
      background: url('photo.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1;
    }
    .content {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100%;
      color: white;
      padding: 20px;
      text-align: center;
    }
    .invitation-text {
      background-color: rgba(0,0,0,0.6);
      padding: 20px;
      border-radius: 12px;
      max-width: 800px;
      margin-bottom: 30px;
    }
    .invitation-text p {
      font-size: 1.1rem;
      line-height: 1.6;
    }
    .invitation-text p strong {
      font-size: 1.3rem;
    }
    #timer {
      font-size: 1.8rem;
      margin: 15px 0;
      font-weight: bold;
    }
    .dresscode {
      margin: 20px auto;
      background-color: rgba(255, 255, 255, 0.1);
      color: #fff;
      padding: 15px 25px;
      border-radius: 10px;
      max-width: 500px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }
    .rsvp {
      display: flex;
      gap: 20px;
      margin: 20px 0;
    }
    .rsvp button {
      padding: 10px 20px;
      font-size: 1rem;
      cursor: pointer;
      background-color: #f1c40f;
      border: none;
      border-radius: 8px;
      transition: 0.3s;
    }
    .rsvp button:hover {
      background-color: #d4ac0d;
      color: white;
    }
    #counter {
      font-size: 1.2rem;
      margin-bottom: 20px;
    }
    #whatsapp {
      position: fixed;
      bottom: 20px; right: 20px;
      background: #25D366;
      color: white;
      padding: 10px 20px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: bold;
      z-index: 3;
    }
    audio {
      display: none;
    }
  </style>
</head>
<body>

  <div class="overlay"></div>

  <div class="content">
    <div class="invitation-text">
      <p><strong>“ö“±—Ä–º–µ—Ç—Ç—ñ –∞“ì–∞–π—ã–Ω-—Ç—É—ã—Å, “õ–∞–¥—ñ—Ä–ª—ñ –∂–æ—Ä–∞-–∂–æ–ª–¥–∞—Å!</strong></p>
      <p>”®–º—ñ—Ä—ñ–º—ñ–∑–¥–µ–≥—ñ –µ“£ “õ—É–∞–Ω—ã—à—Ç—ã, –µ“£ “±–º—ã—Ç—ã–ª–º–∞—Å —Å”ô—Ç—Ç—ñ“£ –∫—É”ô—Å—ñ –±–æ–ª—É“ì–∞ —Å—ñ–∑–¥–µ—Ä–¥—ñ —à—ã–Ω –∂“Ø—Ä–µ–∫—Ç–µ–Ω —à–∞“õ—ã—Ä–∞–º—ã–∑!</p>
      <p>“∞–ª—ã–º—ã–∑ –±–µ–Ω –∫–µ–ª—ñ–Ω—ñ–º—ñ–∑–¥—ñ“£ / “õ—ã–∑—ã–º—ã–∑ –±–µ–Ω –∫“Ø–π–µ—É –±–∞–ª–∞–º—ã–∑–¥—ã“£ “Ø–ª–∫–µ–Ω ”©–º—ñ—Ä–≥–µ “õ–∞–¥–∞–º –±–∞—Å—É —Å–∞–ª—Ç–∞–Ω–∞—Ç—ã–Ω–∞ ‚Äì <strong>“Æ–ô–õ–ï–ù–£ –¢–û–ô–´–ù–ê</strong> –∞—Ä–Ω–∞–π—ã —à–∞“õ—ã—Ä–∞–º—ã–∑.</p>
      <p>–ë“±–ª “õ—É–∞–Ω—ã—à—Ç–∞ —Å—ñ–∑–¥—ñ“£ –∂—ã–ª—ã –ª–µ–±—ñ–∑—ñ“£—ñ–∑, –∞“õ –±–∞—Ç–∞–ª–∞—Ä—ã“£—ã–∑ –±—ñ–∑ “Ø—à—ñ–Ω –∞—Å–∞ –º–∞“£—ã–∑–¥—ã. –ö”©“£—ñ–ª–¥—ñ –∫–µ—à—Ç—ñ“£ —Å”ô–Ω—ñ ”©–∑–¥–µ—Ä—ñ“£—ñ–∑–±–µ–Ω –∫—ñ—Ä—ñ–ø, —à–∞—Ç—Ç—ã“õ –ø–µ–Ω –µ—Å—Ç–µ–ª—ñ–∫–∫–µ —Ç–æ–ª—ã —Å”ô—Ç—Ç–µ—Ä–≥–µ —Ç–æ–ª—Å—ã–Ω!</p>
      <p><strong>üíç –¢–æ–π –∏–µ–ª–µ—Ä—ñ:</strong><br>”ò–∫–µ: –ï—Ä–±–æ–ª –ñ–∞–π–ª–∞—É–±–µ–∫“±–ª—ã<br>–ê–Ω–∞: –ê–Ω–∞—Ä–≥“Ø–ª “ö—É–∞–Ω—ã—à“õ—ã–∑—ã</p>
      <p><strong>üìÖ –ö“Ø–Ω—ñ:</strong> 10 —Ç–∞–º—ã–∑ 2025 –∂—ã–ª<br><strong>üïï –£–∞“õ—ã—Ç—ã:</strong> 18:00<br><strong>üìç –ú–µ–∫–µ–Ω–∂–∞–π—ã:</strong> "–ê—Ä—É–∞–Ω–∞" —Ç–æ–π—Ö–∞–Ω–∞—Å—ã, –ê—Å—Ç–∞–Ω–∞ “õ–∞–ª–∞—Å—ã</p>
      <p><strong>–†–∞“õ–º–µ—Ç–ø–µ–Ω:</strong> –ñ–∞–π–ª–∞—É–±–µ–∫–æ–≤—Ç–µ—Ä ”ô—É–ª–µ—Ç—ñ</p>
    </div>

    <div id="timer">–£–∞“õ—ã—Ç –µ—Å–µ–ø—Ç–µ–ª—É–¥–µ...</div>

    <div class="dresscode">
      <h2>üëó Dress Code</h2>
      <p style="font-size: 1.1rem; line-height: 1.6;">
        –ï—Ä–ª–µ—Ä–≥–µ: –ê“õ –∫”©–π–ª–µ–∫, “õ–∞—Ä–∞ —à–∞–ª–±–∞—Ä, –ø–∏–¥–∂–∞–∫  
        <br>
        ”ò–π–µ–ª–¥–µ—Ä–≥–µ: –ê“õ –Ω–µ–º–µ—Å–µ –∞–ª—Ç—ã–Ω —Ç“Ø—Å—Ç—ñ –∫”©–π–ª–µ–∫  
        <br><br>
        üì∏ –§–æ—Ç–æ –∑–æ–Ω–∞–º–µ–Ω “Ø–π–ª–µ—Å—ñ–º–¥—ñ –∞—à—ã“õ —Ç“Ø—Å—Ç–µ—Ä “±—Å—ã–Ω—ã–ª–∞–¥—ã
      </p>
    </div>

    <div class="rsvp">
      <button onclick="rsvp('yes')">‚úÖ –ë–∞—Ä–∞–º</button>
      <button onclick="rsvp('no')">‚ùå –ë–∞—Ä–º–∞–π–º—ã–Ω</button>
    </div>

    <div id="counter">“ö–∞—Ç—ã—Å—É—à—ã–ª–∞—Ä —Å–∞–Ω—ã: <span id="count">0</span></div>
  </div>

  <a id="whatsapp" href="https://wa.me/77079361770" target="_blank">WhatsApp</a>

  <audio id="bgmusic" src="music.mp3" autoplay loop></audio>

  <script>
    const eventDate = new Date('2025-08-10T18:00:00');
    function updateTimer() {
      const diff = eventDate - new Date();
      if (diff < 0) {
        document.getElementById('timer').textContent = '–¢–æ–π –±–∞—Å—Ç–∞–ª–¥—ã!';
        clearInterval(interval);
        return;
      }
      const days = Math.floor(diff / 864e5),
            hours = Math.floor((diff / 36e5) % 24),
            mins = Math.floor((diff / 6e4) % 60),
            secs = Math.floor((diff / 1000) % 60);
      document.getElementById('timer').textContent =
        `${days} –∫“Ø–Ω ${hours} —Å–∞“ì–∞—Ç ${mins} –º–∏–Ω ${secs} —Å–µ–∫`;
    }
    const interval = setInterval(updateTimer, 1000);
    updateTimer();

    let count = 0, responded = false;
    function rsvp(ans) {
      if (responded) { alert('–°—ñ–∑ –±“±—Ä—ã–Ω –∂–∞—É–∞–ø –±–µ—Ä—ñ–ø “õ–æ–π–¥—ã“£—ã–∑!'); return; }
      if (ans === 'yes') { count++; document.getElementById('count').textContent = count; }
      alert(ans==='yes' ? '–°—ñ–∑ "–ë–∞—Ä–∞–º" –¥–µ–ø –∂–∞—É–∞–ø –±–µ—Ä–¥—ñ“£—ñ–∑!' : '–°—ñ–∑ "–ë–∞—Ä–º–∞–π–º—ã–Ω" –¥–µ–ø –∂–∞—É–∞–ø –±–µ—Ä–¥—ñ“£—ñ–∑!');
      responded = true;
      document.querySelectorAll('.rsvp button').forEach(b=>b.disabled=true);
    }

    window.addEventListener('click', ()=>{ const a=document.getElementById('bgmusic'); if(a.paused) a.play(); });
  </script>

</body>
</html>'''
    zipf.writestr("index.html", html_content)

zip_path
